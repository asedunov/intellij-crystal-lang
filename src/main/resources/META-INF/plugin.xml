<idea-plugin>
    <id>intellij-crystal-lang</id>
    <name>Crystal</name>
    <vendor email="alexey.sedunov@gmail.com">Alexey Sedunov</vendor>

    <description><![CDATA[Adds support of the Crystal language:
    <ul>
      <li>Basic syntax highlighting</li>
      <li>Initial formatting support</li>
      <li>File structure view</li>
      <li>Go to Class/Go to Symbol navigation</li>
    </ul>]]></description>

    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <fileType name="Crystal"
                  language="Crystal"
                  implementationClass="org.crystal.intellij.CrystalFileType"
                  fieldName="INSTANCE"
                  extensions="cr"/>
        <lang.parserDefinition language="Crystal"
                               implementationClass="org.crystal.intellij.parser.CrystalParserDefinition"/>

        <highlightingPassFactory implementation="org.crystal.intellij.highlighter.CrystalSyntaxHighlightingPass$Factory"/>
        <highlightingPassFactory implementation="org.crystal.intellij.highlighter.CrystalSyntaxCheckingPass$Factory"/>

        <lang.psiStructureViewFactory language="Crystal"
                                      implementationClass="org.crystal.intellij.structure.CrystalStructureViewFactory"/>
        <lang.commenter language="Crystal" implementationClass="org.crystal.intellij.editor.CrystalCommenter"/>
        <lang.foldingBuilder language="Crystal" implementationClass="org.crystal.intellij.editor.CrystalFoldingBuilder"/>

        <typedHandler implementation="org.crystal.intellij.editor.CrystalTypedHandler"
                      order="before selectionQuoting" />
        <backspaceHandlerDelegate implementation="org.crystal.intellij.editor.CrystalBackspaceHandler"/>
        <enterHandlerDelegate implementation="org.crystal.intellij.editor.CrystalEnterHandler"/>

        <langCodeStyleSettingsProvider implementation="org.crystal.intellij.formatter.CrystalCodeStyleSettingsProvider"/>
        <lang.formatter language="Crystal"
                        implementationClass="org.crystal.intellij.formatter.CrystalFormattingModelBuilder"/>

        <projectService serviceImplementation="org.crystal.intellij.config.CrystalProjectSettings"/>

        <projectConfigurable id="crystal.settings"
                             groupId="language"
                             instance="org.crystal.intellij.config.CrystalSettingsConfigurable"/>

        <filePropertyPusher implementation="org.crystal.intellij.config.CrystalLanguageLevelPusher"/>

        <iconProvider implementation="org.crystal.intellij.presentation.CrystalIconProvider"/>

        <elementDescriptionProvider implementation="org.crystal.intellij.presentation.CrystalElementDescriptionProvider"/>

        <stubElementTypeHolder class="org.crystal.intellij.stubs.elementTypes.CrStubElementTypes"/>
        <stubIndex implementation="org.crystal.intellij.stubs.indexes.CrystalTypeShortNameIndex"/>
        <stubIndex implementation="org.crystal.intellij.stubs.indexes.CrystalFunctionShortNameIndex"/>
        <stubIndex implementation="org.crystal.intellij.stubs.indexes.CrystalVariableShortNameIndex"/>

        <gotoClassContributor implementation="org.crystal.intellij.navigation.CrystalGotoClassContributor"/>
        <gotoSymbolContributor implementation="org.crystal.intellij.navigation.CrystalGotoSymbolContributor"/>

        <targetElementEvaluator language="Crystal"
                                implementationClass="org.crystal.intellij.navigation.CrystalTargetElementEvaluator"/>

        <renameHandler implementation="org.crystal.intellij.refactoring.rename.CrystalRenameHandler"/>
    </extensions>
</idea-plugin>