FILE
  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      <empty list>
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement([])('[]')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      <empty list>
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' 1 + 2; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    CrParameterList(CR_PARAMETER_LIST)
      PsiElement(()('(')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('x')
      PsiElement())(')')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' 1 + 2; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    CrParameterList(CR_PARAMETER_LIST)
      PsiElement(()('(')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('x')
      PsiElement())(')')
    PsiWhiteSpace('\n')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' 1 + 2; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    CrParameterList(CR_PARAMETER_LIST)
      PsiElement(()('(')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        PsiElement(**)('**')
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('args')
      PsiElement())(')')
    PsiWhiteSpace('\n')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('1\n')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    CrParameterList(CR_PARAMETER_LIST)
      PsiElement(()('(')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('x')
      PsiElement(,)(',')
      PsiWhiteSpace(' ')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        PsiElement(*)('*')
      PsiElement())(')')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' 1; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    CrParameterList(CR_PARAMETER_LIST)
      PsiElement(()('(')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        PsiElement(**)('**')
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('x')
      PsiElement(,)(',')
      PsiWhiteSpace(' ')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        PsiElement(**)('**')
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('y')
      PsiElement())(')')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    CrParameterList(CR_PARAMETER_LIST)
      PsiElement(()('(')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        PsiElement(**)('**')
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('x')
      PsiElement(,)(',')
      PsiWhiteSpace(' ')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('y')
      PsiElement())(')')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' 1 + 2 ')
      CrMacroExpression(CR_MACRO_EXPRESSION)
        PsiElement({{)('{{')
        CrReferenceExpression(CR_REFERENCE_EXPRESSION)
          CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
            PsiElement(<identifier>)('foo')
        PsiElement(}})('}}')
      PsiElement(<macro fragment>)(' 3 + 4; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' 1 + 2 ')
      CrMacroExpression(CR_MACRO_EXPRESSION)
        PsiElement({{)('{{')
        PsiWhiteSpace(' ')
        CrReferenceExpression(CR_REFERENCE_EXPRESSION)
          CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
            PsiElement(<identifier>)('foo')
        PsiWhiteSpace(' ')
        PsiElement(}})('}}')
      PsiElement(<macro fragment>)(' 3 + 4; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' 1 + 2 ')
      CrMacroExpression(CR_MACRO_EXPRESSION)
        PsiElement({{)('{{')
        CrReferenceExpression(CR_REFERENCE_EXPRESSION)
          CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
            PsiElement(<identifier>)('foo')
        PsiElement(}})('}}')
      PsiWhiteSpace('\ ')
      PsiElement(<macro fragment>)('3 + 4; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    CrParameterList(CR_PARAMETER_LIST)
      PsiElement(()('(')
      PsiWhiteSpace('\n')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('a')
        PsiWhiteSpace(' ')
        PsiElement(=)('=')
        PsiWhiteSpace(' ')
        CrIntegerLiteralExpression(CR_INTEGER_LITERAL_EXPRESSION)
          PsiElement(<integer literal>)('0')
      PsiWhiteSpace('\n')
      PsiElement())(')')
    PsiWhiteSpace('\n')
    CrMacroLiteral(CR_MACRO_LITERAL)
      <empty list>
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiWhiteSpace('\n')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('eenum\n')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiWhiteSpace('\n')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(''\''\n')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiWhiteSpace('\n')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(''\\'\n')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiWhiteSpace('\n')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('"\'"\n')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiWhiteSpace('\n')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('"\\"\n')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' ')
      CrMacroWrapperStatement(CR_MACRO_WRAPPER_STATEMENT)
        PsiElement({%)('{%')
        PsiWhiteSpace(' ')
        CrAssignmentExpression(CR_ASSIGNMENT_EXPRESSION)
          CrReferenceExpression(CR_REFERENCE_EXPRESSION)
            CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
              PsiElement(<identifier>)('foo')
          PsiWhiteSpace(' ')
          PsiElement(=)('=')
          PsiWhiteSpace(' ')
          CrIntegerLiteralExpression(CR_INTEGER_LITERAL_EXPRESSION)
            PsiElement(<integer literal>)('1')
        PsiErrorElement:Expected: '%}'
          <empty list>
    PsiWhiteSpace(' ')
    PsiErrorElement:Expected: 'end'
      PsiElement(})('}')
      PsiElement(<macro fragment>)('; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(def)('def')
    PsiErrorElement:Parentheses are mandatory for macro arguments
      <empty list>
    PsiWhiteSpace(' ')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('foo : String; 1; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
      PsiElement(=)('=')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      <empty list>
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    PsiElement(<constant>)('Foo')
    PsiErrorElement:Macro can't have a receiver
      <empty list>
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(';')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiErrorElement:Macro can't have a receiver
      <empty list>
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('.bar;')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    PsiElement(<constant>)('Foo')
    PsiErrorElement:Macro can't have a receiver
      <empty list>
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('.bar;')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiErrorElement:Unexpected &&
      <empty list>
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('&&;')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiErrorElement:Expected: 'end'
      <empty list>

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    CrParameterList(CR_PARAMETER_LIST)
      PsiElement(()('(')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('x')
      PsiWhiteSpace('\n')
      PsiErrorElement:Expected: ')'
        PsiElement(,)(',')
        PsiElement(<identifier>)('y')
      PsiElement())(')')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' 1; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    CrParameterList(CR_PARAMETER_LIST)
      PsiElement(()('(')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('x')
      PsiWhiteSpace(' ')
      PsiErrorElement:Expected: ')'
        PsiElement(:)(':')
        PsiWhiteSpace(' ')
        PsiElement(<constant>)('Int32')
      PsiElement())(')')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    CrParameterList(CR_PARAMETER_LIST)
      PsiElement(()('(')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        PsiElement(*)('*')
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('x')
      PsiElement(,)(',')
      PsiWhiteSpace(' ')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        PsiElement(*)('*')
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('y')
      PsiElement())(')')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    CrParameterList(CR_PARAMETER_LIST)
      PsiElement(()('(')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('x')
      PsiElement(,)(',')
      PsiWhiteSpace(' ')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        PsiElement(*)('*')
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('y')
      PsiElement())(')')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      <empty list>
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiErrorElement:Parentheses are mandatory for macro arguments
      <empty list>
    PsiWhiteSpace(' ')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('x y; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    CrParameterList(CR_PARAMETER_LIST)
      PsiElement(()('(')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('x')
        PsiWhiteSpace(' ')
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('y')
      PsiElement())(')')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    CrParameterList(CR_PARAMETER_LIST)
      PsiElement(()('(')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('x')
        PsiWhiteSpace(' ')
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('y')
      PsiWhiteSpace(' ')
      PsiErrorElement:Expected: ')'
        PsiElement(<identifier>)('z')
      PsiElement())(')')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiErrorElement:Parentheses are mandatory for macro arguments
      <empty list>
    PsiWhiteSpace(' ')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('*y;')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiErrorElement:Parentheses are mandatory for macro arguments
      <empty list>
    PsiWhiteSpace(' ')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('x; 1 + 2; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiErrorElement:Parentheses are mandatory for macro arguments
      <empty list>
    PsiWhiteSpace(' ')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('x\n 1 + 2; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    CrParameterList(CR_PARAMETER_LIST)
      PsiElement(()('(')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('x')
        PsiWhiteSpace(' ')
        PsiElement(=)('=')
        PsiWhiteSpace(' ')
        CrPseudoConstantExpression(CR_PSEUDO_CONSTANT_EXPRESSION)
          PsiElement(__LINE__)('__LINE__')
      PsiElement())(')')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      <empty list>
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      <empty list>
    PsiErrorElement:Expected: 'end'
      PsiElement({%)('{%')
    PsiElement(end)('end')
  PsiErrorElement:Expected: <EOF>
    PsiElement(})('}')
    PsiElement(;)(';')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      CrMacroVariableExpression(CR_MACRO_VARIABLE_EXPRESSION)
        PsiElement(<macro variable>)('%var')
      PsiElement(<macro fragment>)(' if true;')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('var if true;')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('if ')
      CrMacroVariableExpression(CR_MACRO_VARIABLE_EXPRESSION)
        PsiElement(<macro variable>)('%var')
      PsiElement(<macro fragment>)(';true;')
      PsiElement(<macro fragment>)('end;')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('if var;true;')
      PsiElement(<macro fragment>)('end;')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      CrMacroVariableExpression(CR_MACRO_VARIABLE_EXPRESSION)
        PsiElement(<macro variable>)('%var')
      PsiElement(<macro fragment>)(' unless true;')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('var unless true;')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('unless ')
      CrMacroVariableExpression(CR_MACRO_VARIABLE_EXPRESSION)
        PsiElement(<macro variable>)('%var')
      PsiElement(<macro fragment>)(';true;')
      PsiElement(<macro fragment>)('end;')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('unless var;true;')
      PsiElement(<macro fragment>)('end;')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('x')
    PsiWhiteSpace('\n')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('%{}\n')
    PsiElement(end)('end')

  CrEnum(CR_ENUM_DEFINITION)
    PsiElement(enum)('enum')
    PsiWhiteSpace(' ')
    CrPathNameElement(CR_PATH_NAME_ELEMENT)
      CrReferenceExpression(CR_REFERENCE_EXPRESSION)
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<constant>)('Foo')
    PsiElement(;)(';')
    PsiWhiteSpace(' ')
    CrBody(CR_BODY)
      CrMacro(CR_MACRO_DEFINITION)
        PsiElement(macro)('macro')
        PsiWhiteSpace(' ')
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<identifier>)('foo')
        PsiElement(;)(';')
        CrMacroLiteral(CR_MACRO_LITERAL)
          <empty list>
        PsiElement(end)('end')
      PsiElement(;)(';')
    PsiWhiteSpace(' ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiWhiteSpace('\n')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('  <<-FOO\n    #{ ')
      CrMacroVariableExpression(CR_MACRO_VARIABLE_EXPRESSION)
        PsiElement(<macro variable>)('%var')
      PsiElement(<macro fragment>)(' }\n  FOO\n')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiWhiteSpace('\n')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('  <<-FOO, <<-BAR + ""\n  FOO\n  BAR\n')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiWhiteSpace('\n')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('  <<-FOO\n    %foo\n  FOO\n')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    CrParameterList(CR_PARAMETER_LIST)
      PsiElement(()('(')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        PsiErrorElement:Can't use instance variable in macro
          <empty list>
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<instance variable>)('@var')
      PsiElement())(')')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    CrParameterList(CR_PARAMETER_LIST)
      PsiElement(()('(')
      CrSimpleParameter(CR_SIMPLE_PARAMETER_DEFINITION)
        PsiErrorElement:Can't use class variable in macro
          <empty list>
        CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
          PsiElement(<class variable>)('@@var')
      PsiElement())(')')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' bar classx; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' bar class0; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' bar class?; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' bar class!; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)(' bar class: 1; ')
    PsiElement(end)('end')

  CrMacro(CR_MACRO_DEFINITION)
    PsiElement(macro)('macro')
    PsiWhiteSpace(' ')
    CrSimpleNameElement(CR_SIMPLE_NAME_ELEMENT)
      PsiElement(<identifier>)('foo')
    PsiElement(;)(';')
    CrMacroLiteral(CR_MACRO_LITERAL)
      PsiElement(<macro fragment>)('bar(')
      PsiElement(<macro fragment>)('end: 1);')
    PsiElement(end)('end')